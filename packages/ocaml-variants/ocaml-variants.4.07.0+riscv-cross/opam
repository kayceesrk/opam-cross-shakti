opam-version: "2.0"
maintainer: "kc@kcsrk.info"
flags: compiler
build: [
  ["./configure" "-no-ocamldoc" "-no-debugger" "-prefix" "%{build}%/install"]
  ["make" "-j4" "world.opt"]
  ["make" "install"]
  ["./configure" "--target" "riscv64-unknown-linux-gnu" "-no-ocamldoc" "-no-debugger" "-target-bindir" "%{build}%/install/bin"]
  ["make" "-j4" "world"]
  ["make" "-j4" "opt"]
]
url {
  src: "git://github.com/kayceesrk/riscv-ocaml#4.07+cross"
}
build-env: [
	[BUILD_DIR = "%{build}%/install"]
	[PATH += "$(BUILD_DIR)"]
]
install: [
  ["cp" "%{build}%/install/bin/ocamlrun" "byterun"]
  ["make" "install"]
]
